{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>K·∫øt qu·∫£ b√†i ki·ªÉm tra</title>
    <link rel="stylesheet" type="text/css" href="{% static 'polls/result.css' %}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<div class="result-container">
    <h2 class="result-title">üéâ K·∫øt qu·∫£ b√†i ki·ªÉm tra</h2>
    <div class="score-box">
        <span>{{username}}, </span>
        <span>ƒêi·ªÉm c·ªßa b·∫°n:</span>
        <span class="score">{{ score }}</span>
       <!-- <span>K·∫øt qu·∫£: <strong>{% if passed %}passed{% else %}failed{% endif %}</strong></span> -->
    </div>
    <hr>
    <div class="result-list">
    {% for r in results %}
    <div class="result-item">
        <div class="result-question"><strong>{{ forloop.counter }}. {{ r.question }}</strong></div>
        <div class="result-answer">
            {% if r.question_type == "TEXT" %}
                B·∫°n tr·∫£ l·ªùi: <span class="selected-answer">{{ r.selected }}</span>
                {% if r.correct_answer %}
                    <!-- Ch·ªâ hi·ªÉn th·ªã ƒë√°p √°n ƒë√∫ng v√† nh√£n ƒê√∫ng/Sai khi c√≥ ƒë√°p √°n c·ªë ƒë·ªãnh -->
                    <div>ƒê√°p √°n ƒë√∫ng: <span class="correct-answer">{{ r.correct_answer }}</span></div>
                    {% if r.is_correct %}
                        <span class="correct">‚úÖ ƒê√∫ng</span>
                    {% else %}
                        <span class="incorrect">‚ùå Sai</span>
                    {% endif %}
                {% else %}
                    <!-- C√¢u m·ªü: kh√¥ng hi·ªÉn th·ªã "ƒê√∫ng/Sai".
                         (B·∫°n c√≥ th·ªÉ hi·ªÉn th·ªã ƒëi·ªÉm n·ªôi dung n·∫øu ƒë√£ l∆∞u 'r.score') -->
                    {% if r.score %}
                        <div>ƒêi·ªÉm: <strong>{{ r.score }}</strong></div>
                    {% endif %}
                {% endif %}
            {% else %}
                B·∫°n ch·ªçn: <span class="selected-answer">{{ r.selected }}</span>
                {% if r.is_correct %}
                    <span class="correct">‚úÖ ƒê√∫ng</span>
                {% else %}
                    <span class="incorrect">‚ùå Sai</span>
                {% endif %}
            {% endif %}
        </div>
    </div>
    <hr>
    {% endfor %}
</div>

    <a href="{% url 'polls:home' %}" class="again-btn">v·ªÅ trang ch·ªß</a>
</div>
<script>
    // NgƒÉn s·ª≠ d·ª•ng n√∫t Back
    history.pushState(null, null, location.href);
    window.onpopstate = function () {
        history.go(1); // √âp tr√¨nh duy·ªát quay l·∫°i trang hi·ªán t·∫°i
    };
</script>
</body>
</html>