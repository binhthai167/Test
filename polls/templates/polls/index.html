{% load static %}
{% load custom_filters %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ki·ªÉm tra ƒë·∫ßu v√†o</title>
    <link rel="stylesheet" type="text/css" href="{% static 'polls/index.css' %}">
    <script src="{% static 'polls/index.js' %}"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<div class="poll-container">
    <h1 class="poll-title">üìù Ki·ªÉm tra ƒë·∫ßu v√†o</h1>
    <div class="user-info-container">
        <form id="submitAns" method="post" action="{% url 'polls:submit_exam' exam_code.code %}">
            {% csrf_token %}
            <div class="question-block">
                <label for="username" class="question-text">üë§ Nh·∫≠p t√™n c·ªßa b·∫°n:</label>
                <input type="text" id="username" name="username" class="input-text" placeholder="V√≠ d·ª•: Nguy·ªÖn VƒÉn A" value="{{ request.session.username|default_if_none:'' }}"  required data-error="Vui l√≤ng nh·∫≠p h·ªç v√† t√™n c·ªßa b·∫°n">
                <label for = "phone" class="question-text">üìû Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i c·ªßa b·∫°n:</label>
                <input type="text" id="phone" name="phone" class="input-text" placeholder="0123456789" value="{{ request.session.phone|default_if_none:'' }}" required data-error="Vui l√≤ng nh·∫≠p s·ªë ƒëi·ªán tho·∫°i c·ªßa b·∫°n">
                
                <label for="email" class="question-text">üìß Nh·∫≠p email c·ªßa b·∫°n:</label>
                <input type="email" id="email" name="email" class="input-text" placeholder="email@domain.com" value="{{ request.session.email|default_if_none:'' }}" required data-error="Vui l√≤ng nh·∫≠p email c·ªßa b·∫°n">
                <label for="supplier_company" class="question-text">üè¢ Nh·∫≠p t√™n c√¥ng ty cung ·ª©ng: </label>
                <input type="text" id="supplier_company" name="supplier_company" class="input-text" placeholder="C√¥ng ty TNHH ABC" value="{{ request.session.supplier_company|default_if_none:'' }}" required data-error="Vui l√≤ng nh·∫≠p t√™n c√¥ng ty cung ·ª©ng c·ªßa b·∫°n">
                <label for="license_plate" class="question-text">üöó Nh·∫≠p bi·ªÉn s·ªë xe (n·∫øu c√≥):</label>
                <input type="text" id="license_plate" name="license_plate" class="input-text" placeholder="ABC-1234" value="{{ request.session.license_plate|default_if_none:'' }}" >
            </div>
            <br>
            
            {% for question in questions %}
            <div class="question-block">
                <p class="question-text">
                    <strong>{{ forloop.counter }}) {{ question.question_text }}</strong>
                </p>
                {% if question.question_type == 'TEXT' %}
                    <textarea name="question_{{ question.id }}" rows="4" class="input-textarea" placeholder="Vi·∫øt c√¢u tr·∫£ l·ªùi c·ªßa b·∫°n v√†o ƒë√¢y...">{{ text_answers|get_item:question.id|default_if_none:"" }}</textarea>
                {% else %}
                    <div class="choice-list">
                        {% for choice in question.choice_set.all %}
                            <label class="choice-label">
                                <input type="radio"
                                       name="question_{{ question.id }}"
                                       value="{{ choice.id }}"
                                       {% if selected_choices|get_item:question.id == choice.id|stringformat:"s" %}checked{% endif %}>
                                <span class="choice-text">{{ choice.label }}. {{ choice.choice_text }}</span>
                            </label>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            {% endfor %}
            <input type="hidden" name="exam_code" value="{{ exam_code.code }}">
            <button type="submit" class="submit-btn">N·ªôp b√†i</button>
        </form>
    </div>
</div>


</body>
</html>